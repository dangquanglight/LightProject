<?php	$file = getcwd() . "/" . APPPATH . "controllers/MY_controller.php";			include $file;	class Fsadfzerrwez_email_templates extends Fsadfzerrwez_home{		function Fsadfzerrwez_email_templates(){					parent::__construct();			$this->load->model('email_template');		}				/***********************************************************************/		/**************************** START EMAIL TEMPLATES *******************************/				/***********************************************************************/				function email_templates(){					$this->check_login();			$this->check_role(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_VIEW);			$data = $this->get_email_templates();			$this->load_page('email-templates', $this->lang->line('email-template'), $data);		}				function ajax_email_templates(){			$this->check_login_ajax();			$this->check_role_ajax(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_VIEW);			$data = $this->get_email_templates();			$model['data'] = $data;			$model['controller_name'] = $this->controller_name;			$this->load->view($this->home_directory . "email-templates-table", $model);		}				private function get_email_templates(){						$data = $this->get_page_config();			$sort_by = $this->input->get('sort_by');			$ascending = $this->input->get('ascending');						$num_rows = "";			$query = $this->email_template->get_email_templates($data['keywords'], $data['page'], $data['page_size'], $sort_by, $ascending, $num_rows);			$this->set_paging_data($data, $query, $num_rows);						return $data;		}				function add_email_template($id = null){						$this->check_login();			$this->check_role(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_VIEW);			$result = null;			$email_template = null;			$err_msg = '';			$en_open_status = $this->input->post('en_open_status');			$fi_open_status = $this->input->post('fi_open_status');			$ci_open_status = $this->input->post('ci_open_status');			$data = array();
			$data['back-url'] = get_back_url(base_url("email-templates"), MODULE_EMAIL_TEMPLATE);			if (is_post()){												$result = false;				$email_template = $this->email_template->get_post_data();								if ($id){										$this->check_role(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_UPDATE);					$result = $this->email_template->update($email_template, $id);					if ($result){												$err_msg = get_saved_message('email-template', $email_template->title_en);						if ($this->input->post('save_and_continue') == false){															$this->set_flashdata($err_msg);							redirect($data['back-url']);						}												}					else{						$err_msg = get_saved_fail_message('email-template', $email_template->title_en);					}				}				else{										$this->check_role(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_ADD);					$result = $this->email_template->insert($email_template, get_user_id());											if ($result){						$err_msg = get_saved_message('email-template', $email_template->title_en);						if ($this->input->post('save_and_continue') == true){							//clear old data							$email_template->clear_data();						}						else{							$this->set_flashdata($err_msg);							redirect($data['back-url']);						}												}					else{						$err_msg = get_saved_fail_message('email-template', $email_template->title_en);					}										}							}			else{								if ($id){										$email_template = $this->email_template->get_id($id);									}				else{										$email_template = new email_template();				}								$en_open_status = 1;			}					$data['en_open_status'] = $en_open_status;			$data['fi_open_status'] = $fi_open_status;			$data['ci_open_status'] = $ci_open_status;			$data['err_msg'] = $err_msg;			$data['result'] = $result;			$data['data'] = $email_template;			$data['id'] = $id;			$title_page = $this->lang->line('email-template');			if (!$email_template){				$title_page = get_not_found_short();			}			$this->load_page('add-email-template', $title_page, $data);		}				function active_email_templates(){						$this->check_login_ajax();			$this->check_role_ajax(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_UPDATE);			$active = $this->input->post('active');						$ids = $this->get_array_ids();									$this->email_template->active_in($active, $ids);		}				function delete_email_templates(){			$this->check_login_ajax();			$this->check_role_ajax(MODULE_EMAIL_TEMPLATE, MODULE_TYPE_DELETE);			$this->check_login();									$ids = $this->get_array_ids();									$this->email_template->delete_in($ids);		}				/***********************************************************************/		/**************************** END OF EMAIL TEMPLATES *******************************/				/***********************************************************************/		}?>