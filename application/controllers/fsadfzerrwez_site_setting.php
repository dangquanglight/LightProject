<?php	$file = getcwd() . "/" . APPPATH . "controllers/MY_controller.php";			include $file;	class Fsadfzerrwez_site_setting extends Fsadfzerrwez_home{		function Fsadfzerrwez_site_setting(){					parent::__construct();				$this->load->model("site_setting");					}				/***********************************************************************/		/**************************** START SITE SETTING *******************************/				/***********************************************************************/				function setting(){						$this->check_login();			$this->check_role(MODULE_SITE_SETTING, MODULE_TYPE_VIEW);			$result = null;			$type = null;				$err_msg = '';			$data = array();			$site_setting = null;			$appearence_status = 0;			$appearence_logo_status = 0;			$website_config_status = 0;			$shadow_status = 0;			$menu_button_status = 0;						if (is_post()){				$this->check_role(MODULE_SITE_SETTING, MODULE_TYPE_ADD);				$this->check_role(MODULE_SITE_SETTING, MODULE_TYPE_UPDATE);				$result = true;				$appearence_status = $this->input->post('appearence-status');				$appearence_logo_status = $this->input->post('appearence-logo-status');				$website_config_status = $this->input->post('website-config-status');				$shadow_status = $this->input->post('shadow-status');				$menu_button_status = $this->input->post('menu-button-status');								//check file valid				$logo = check_file_upload_valid('logo');				if ($logo === false){					add_form_error('logo', $this->lang->line('required-logo-valid'));				}								//check file valid				$email_logo = check_file_upload_valid('email_logo');				if ($email_logo === false){					add_form_error('email_logo', $this->lang->line('required-email-logo-valid'));				}								//check file valid				$bg_image = check_file_upload_valid('bg_image');				if ($bg_image === false){					add_form_error('bg_image', $this->lang->line('required-background-valid'));				}								$site_setting = $this->site_setting->get_post_data();				if ($logo && $email_logo && $bg_image){					$result = $this->site_setting->insert_or_update($site_setting, get_user_id());					if ($result){						$err_msg = get_saved_message('', $this->lang->line('site-setting'));						//upload files						if ($logo === true){														move_uploaded_file($_FILES['logo']['tmp_name'], getcwd() . '/images/logo.png');						}												if ($email_logo === true){														move_uploaded_file($_FILES['email_logo']['tmp_name'], getcwd() . '/images/small-logo.png');						}												if ($bg_image === true){														move_uploaded_file($_FILES['bg_image']['tmp_name'], getcwd() . '/images/background.png');						}					}						else{						$err_msg = get_saved_fail_message('site-setting', $this->lang->line('site-setting'));					}					add_form_error('', $err_msg);					add_form_error('result', ' ');				}			}			else{								$site_setting = $this->site_setting->get_one();				$website_config_status = 1;				$appearence_status = 0;				$appearence_logo_status = 0;				$shadow_status = 0;				$menu_button_status = 0;				if (!$site_setting){					$site_setting = new site_setting();				}			}			$data['website-config-status'] = $website_config_status;			$data['appearence-status'] = $appearence_status;			$data['appearence-logo-status'] = $appearence_logo_status;			$data['shadow-status'] = $shadow_status;			$data['menu-button-status'] = $menu_button_status;			$data['err_msg'] = $err_msg;			$data['result'] = $result;									$data['data'] = $site_setting;						$this->load_page('site-setting', $this->lang->line('site-setting'), $data);		}				/***********************************************************************/		/**************************** END OF SITE SETTING *******************************/				/***********************************************************************/			}?>