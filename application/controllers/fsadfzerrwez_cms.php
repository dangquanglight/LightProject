<?php	$file = getcwd() . "/" . APPPATH . "controllers/MY_controller.php";			include $file;	class Fsadfzerrwez_cms extends Fsadfzerrwez_home{		function Fsadfzerrwez_cms(){					parent::__construct();			$this->load->model('cms');		}				/***********************************************************************/		/**************************** START CMS *******************************/				/***********************************************************************/				function cms(){			$this->check_login();			$this->check_role(MODULE_CMS, MODULE_TYPE_VIEW);			$data = $this->get_cms();			$this->load_page('cms', $this->lang->line('cms'), $data);		}				function ajax_cms(){			$this->check_login_ajax();			$this->check_role_ajax(MODULE_CMS, MODULE_TYPE_VIEW);			$data = $this->get_cms();			$model['data'] = $data;			$model['controller_name'] = $this->controller_name;			$this->load->view($this->home_directory . "cms-table", $model);		}				private function get_cms(){			$this->check_login(true);						$data = $this->get_page_config();			$sort_by = $this->input->get('sort_by');			$ascending = $this->input->get('ascending');						$num_rows = "";			$query = $this->cms->get_cms($data['keywords'], $data['page'], $data['page_size'], $sort_by, $ascending, $num_rows);			$this->set_paging_data($data, $query, $num_rows);						return $data;		}				function add_cms($id = null){						$this->check_login();			$this->check_role(MODULE_CMS, MODULE_TYPE_VIEW);			$result = null;			$cms = null;			$err_msg = '';			$en_open_status = $this->input->post('en_open_status');			$fi_open_status = $this->input->post('fi_open_status');			$ci_open_status = $this->input->post('ci_open_status');			$data = array();			$data['back-url'] = get_back_url(base_url("cms"), MODULE_CMS);			if (is_post()){												$result = false;				$cms = $this->cms->get_post_data();								if ($id){										$this->check_role(MODULE_CMS, MODULE_TYPE_UPDATE);					$result = $this->cms->update($cms, $id);					if ($result){												$err_msg = get_saved_message('cms', $cms->title_en);						if ($this->input->post('save_and_continue') == false){															$this->set_flashdata($err_msg);							redirect($data['back-url']);						}												}					else{						$err_msg = get_saved_fail_message('cms', $cms->title_en);					}				}				else{										$this->check_role(MODULE_CMS, MODULE_TYPE_ADD);					$result = $this->cms->insert($cms, get_user_id());											if ($result){						$err_msg = get_saved_message('cms', $cms->title_en);						if ($this->input->post('save_and_continue') == true){							//clear old data							$cms->clear_data();						}						else{							$this->set_flashdata($err_msg);							redirect($data['back-url']);						}												}					else{						$err_msg = get_saved_fail_message('cms', $cms->title_en);					}										}							}			else{								if ($id){										$cms = $this->cms->get_id($id);									}				else{										$cms = new cms();				}								$en_open_status = 1;			}					$data['en_open_status'] = $en_open_status;			$data['fi_open_status'] = $fi_open_status;			$data['ci_open_status'] = $ci_open_status;			$data['err_msg'] = $err_msg;			$data['result'] = $result;			$data['data'] = $cms;			$data['id'] = $id;			$title_page = $this->lang->line('cms');			if (!$cms){				$title_page = get_not_found_short();			}			$this->load_page('add-cms', $title_page, $data);		}				function active_cms(){						$this->check_login_ajax();			$this->check_role_ajax(MODULE_CMS, MODULE_TYPE_UPDATE);			$active = $this->input->post('active');						$ids = $this->get_array_ids();									$this->cms->active_in($active, $ids);		}				function delete_cms(){			$this->check_login_ajax();			$this->check_role_ajax(MODULE_CMS, MODULE_TYPE_DELETE);			$this->check_login();									$ids = $this->get_array_ids();									$this->cms->delete_in($ids);		}				/***********************************************************************/		/**************************** END OF CMS *******************************/				/***********************************************************************/		}?>