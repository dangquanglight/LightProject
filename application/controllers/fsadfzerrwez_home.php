<?php	class Fsadfzerrwez_home extends MY_controller{								protected $category_id = null;		protected $group_id = null;		protected $website_setting = null;		protected $cookie_auth_name = "auth";						function Zaduzdfasdf_home(){						parent::__construct();				$this->home_directory = "home/";						$this->check_auto_login();					}				protected function load_page($file_name, $title, $data, $template = "home-template"){						$model['data'] = $data;						$model['page_title'] = $title;			$model['home_directory'] = $this->home_directory;			$model['file_name'] = $this->home_directory . $file_name . ".php";			$model['controller_name'] = $this->controller_name;			$model['view_name'] = $this->view_name;						$model['user_info'] = get_login_data();												$model['language'] = $this->language;			$model['user_role_modules'] = $this->user_role_modules;						$model['menu_top'] = $this->menu->get_all_menu_in_user($this->language->iso);						$model['submenu_top'] = $this->submenu->get_all_submenu_in_user($this->language->iso);			$model['date_info'] = $this->date_info;			$this->load->model('cms');			$model['footer_cms'] = $this->cms->get_id(3);			$this->load->model('site_setting');			$model['setting'] = $this->site_setting->get_one();			$model['company_name'] = get_company_name();			$model['scroll_top'] = $this->input->post('scroll-top');			$this->load->model('favorite_menu');			$model['favorite_menu_home'] = $this->favorite_menu->get_favories_menu(3);			$this->load->view($template . ".php", $model);								}				protected function check_auto_login(){			if (isset($_COOKIE[$this->cookie_auth_name]) && !get_user_id()){								parse_str($_COOKIE[$this->cookie_auth_name],$data);								if (isset($data['email']) && isset($data['hash'])){					$email = $data['email'];					$pass_length = strlen($data['hash']);					$password = substr($data['hash'], 5, $pass_length - 10);					$user = $this->user->get_user_by_email($email);					if ($user){						if($user->active == 1 && $user->status == 1 && md5($user->password) == $password){							set_login_data($user);							$this->load->model("tracking");														$this->load->model("tracking_details");							$this->load->model("accessing_tracking");							$session_id = $this->get_session_id();							$this->tracking->tracking_user($session_id, $user->id, true);														$this->guest_tracking->update_user_login($session_id, $user->id);							//reset cookie							$time = time();							$rem_data = "email=" . urlencode($email) . "&hash=" . substr($time, 0, 5) . md5(urlencode($user->password)) . substr($time, -5);							setcookie($this->cookie_auth_name, $rem_data, $time + 14 * 24 * 60 * 60);						}						else{							//delete cookie							setcookie($this->cookie_auth_name, "", -1);						}					}					else{						//delete cookie						setcookie($this->cookie_auth_name, "", -1);					}				}							}		}			}?>